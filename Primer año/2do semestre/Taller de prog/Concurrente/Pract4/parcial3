programa parcial2
procesos
  proceso tomarFlores(ES flor:numero)
  comenzar
    mientras(HayFlorEnLaEsquina)
      tomarFlor
      flor:=flor+1
  fin
  proceso depositarFlores(ES aux:numero)
  comenzar
    mientras(aux<>0)
      depositarFlor
      aux:=(aux)-1
  fin
areas
  area:AreaC(9,15,31,25)
robots
  robot lateral
  variables
    flor:numero
    aux:numero
  comenzar
    flor:=0
    tomarFlores(flor)
    si((PosAv)=9)
      derecha
    sino
      si((PosAv)=31)
        repetir 3
          derecha
    repetir 10
      mover
      tomarFlores(flor)
    si(((PosCa)=21)&((PosAv)=19))
      derecha
      BloquearEsquina(19,20)
      mover
      aux:=flor
      depositarFlores(aux)
      Pos(9,21)
      LiberarEsquina(19,20)
      EnviarMensaje(flor,fiscal)
    sino
      si(((PosCa)=19)&((PosAv)=19))
        repetir 3
          derecha
        BloquearEsquina(19,20)
        mover
        aux:=flor
        depositarFlores(aux)
        Pos(9,19)
        LiberarEsquina(19,20)
        EnviarMensaje(flor,fiscal)
      sino
        si(((PosCa)=21)&((PosAv)=21))
          repetir 3
            derecha
          BloquearEsquina(21,20)
          mover
          aux:=flor
          depositarFlores(aux)
          Pos(31,21)
          LiberarEsquina(21,20)
          EnviarMensaje(flor,fiscal)
        sino
          si(((PosCa)=19)&((PosAv)=21))
            derecha
            BloquearEsquina(21,20)
            mover
            aux:=flor
            depositarFlores(aux)
            Pos(31,19)
            LiberarEsquina(21,20)
            EnviarMensaje(flor,fiscal)
  fin
  robot central
  variables
    flor:numero
    aux:numero
    quien:numero
    estado:boolean
    estado2:boolean
  comenzar
    estado:=F
    aux:=0
    estado2:=F
    flor:=0
    RecibirMensaje(quien,fiscal)
    si((quien)=1)
      derecha
    sino
      si((quien)=2)
        repetir 3
          derecha
    tomarFlores(flor)
    repetir 9
      mover
      tomarFlores(flor)
    si((quien)=1)
      BloquearEsquina(19,20)
      mover
      tomarFlores(flor)
      BloquearEsquina(20,20)
      mover
      LiberarEsquina(19,20)
      aux:=flor
      depositarFlores(aux)
      EnviarMensaje(quien,fiscal)
      EnviarMensaje(flor,fiscal)
      Pos(9,20)
      LiberarEsquina(20,20)
    sino
      si((quien)=2)
        BloquearEsquina(21,20)
        mover
        tomarFlores(flor)
        BloquearEsquina(20,20)
        mover
        LiberarEsquina(21,20)
        aux:=flor
        depositarFlores(aux)
        EnviarMensaje(quien,fiscal)
        EnviarMensaje(flor,fiscal)
        Pos(31,20)
        LiberarEsquina(20,20)
  fin
  robot jefe
  variables
    quienEs1:numero
    quienEs2:numero
    flor1:numero
    azul:numero
    verde:numero
    flor2:numero
  comenzar
    azul:=0
    verde:=0
    EnviarMensaje(1,centroAzul)
    EnviarMensaje(2,centroVerde)
    RecibirMensaje(flor1,lateral1Azul)
    azul:=azul+flor1
    RecibirMensaje(flor1,lateral2Azul)
    azul:=azul+flor1
    RecibirMensaje(flor2,lateral1Verde)
    verde:=verde+flor2
    RecibirMensaje(flor2,lateral2Verde)
    verde:=verde+flor2
    RecibirMensaje(quienEs1,*)
    si(quienEs1=1)
      RecibirMensaje(flor1,centroAzul)
      Informar('AzulGana',flor1)
    sino
      si(quienEs1=2)
        RecibirMensaje(flor2,centroVerde)
        Informar('VerdeGana',flor2)
    RecibirMensaje(quienEs2,*)
    si(quienEs2=1)
      RecibirMensaje(flor1,centroAzul)
    sino
      RecibirMensaje(flor2,centroVerde)
    azul:=azul+flor1
    verde:=verde+flor2
    si((azul)>(verde))
      Informar('Azul-junto-mas-flores',azul)
    sino
      Informar('Verde-junto-mas-flores',verde)
  fin
variables
  lateral1Azul:lateral
  lateral2Azul:lateral
  centroAzul:central
  centroVerde:central
  lateral1Verde:lateral
  lateral2Verde:lateral
  fiscal:jefe
comenzar
  AsignarArea(lateral1Azul,area)
  AsignarArea(lateral2Azul,area)
  AsignarArea(centroAzul,area)
  AsignarArea(lateral1Verde,area)
  AsignarArea(lateral2Verde,area)
  AsignarArea(centroVerde,area)
  AsignarArea(fiscal,area)
  Iniciar(lateral1Azul,9,19)
  Iniciar(lateral2Azul,9,21)
  Iniciar(centroAzul,9,20)
  Iniciar(lateral1Verde,31,19)
  Iniciar(lateral2Verde,31,21)
  Iniciar(centroVerde,31,20)
  Iniciar(fiscal,20,18)
fin
